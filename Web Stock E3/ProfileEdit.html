<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Setting</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
       document.addEventListener("DOMContentLoaded", function () {
    const username = localStorage.getItem("username");
    const email = localStorage.getItem("email");

    if (!username) {
        window.location.href = "Login.html"; // ‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ Login ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
        return;
    }

    document.getElementById("username").value = username;
    document.getElementById("email").value = email || "";

    fetch("get_profile.php")
        .then(response => response.json())
        .then(data => {
            console.log("Profile Data:", data); // Debug ‡∏î‡∏π‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ
            if (data.logged_in) {
                document.getElementById("username").value = data.user.username;
                document.getElementById("email").value = data.user.email;
                document.getElementById("phone").value = data.user.phone;

                // üî• ‡πÅ‡∏™‡∏î‡∏á Sidebar
                document.querySelectorAll(".sidebar-item").forEach(item => {
                    item.classList.remove("hidden");
                    item.style.display = "block"; // ‡πÄ‡∏ú‡∏∑‡πà‡∏≠ Tailwind ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
                });

                // üî• ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                document.getElementById("logoutBtn").classList.remove("hidden");
                document.getElementById("loginBtn").classList.add("hidden");
                document.getElementById("registerBtn").classList.add("hidden");
            } else {
                console.warn("User not logged in.");
            }
        })
        .catch(error => console.error("Error loading profile data:", error));

    document.getElementById("profileForm").addEventListener("submit", function (event) {
        event.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà

        const formData = new FormData(this);

        fetch("update_profile.php", {
            method: "POST",
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            alert(data.message); // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            if (data.success) {
                localStorage.setItem("email", formData.get("email"));
            }
        })
        .catch(error => console.error("Error:", error));
    });

    // üî• ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ò‡∏µ‡∏°‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
    const savedTheme = localStorage.getItem("theme");
    if (savedTheme === "light") {
        document.documentElement.classList.add("light");
    }
});

    </script>
	<style>
		body {
			background-color: #9a24c9; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
			font-family: "Inter", sans-serif;
		}

		
		.sidebar {
			background-color: #ececff; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á Sidebar */
		}

		.sidebar-item {
			color: #6c61ec; /* ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô Sidebar */
			background-color: #ffffff; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏≠‡πÄ‡∏ó‡πá‡∏° */
		}

		.sidebar-item:hover {
			background-color: #f3f1ff; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏Æ‡πÄ‡∏ß‡∏≠‡∏£‡πå */
		}

		.content {
			background-color: #ececff; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
			color: #000000; /* ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ */
			max-width: 70%; /* ‡∏¢‡πà‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î Main Section */
		}

		.btn-primary {
			background-color: #7f56d9; /* ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å */
			color: #ffffff;
		}

		.btn-primary:hover {
			background-color: #6844b1; /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏Æ‡πÄ‡∏ß‡∏≠‡∏£‡πå */
		}
		/* ‡πÅ‡∏ó‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏ß‡πá‡∏ö */
		.w-full.text-2xl.font-bold.text-left {
			font-family: "Russo One", sans-serif; /* ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏° Cyberpunk */
			color: #00ffff; /* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏ô‡∏µ‡∏≠‡∏≠‡∏ô */
			font-size: 2rem; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
			text-shadow: 0 0 5px #00ffff, /* ‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á‡∏ü‡πâ‡∏≤‡∏£‡∏≠‡∏ö‡πÜ */ 0 0 10px #00ffff,
				0 0 20px #00ffff, 0 0 30px #ff00ff,
				/* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏™‡∏á‡∏ä‡∏°‡∏û‡∏π */ 0 0 80px #ff00ff;
			letter-spacing: 2px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
			text-transform: uppercase; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î */
			margin-left: -80px; /* ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡∏ã‡πâ‡∏≤‡∏¢ */
		}

		header {
			background: linear-gradient(
				to right,
				#070f1f,
				#0c1326
			); /* ‡πÑ‡∏•‡πà‡∏™‡∏µ‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°‡πÑ‡∏õ‡πÄ‡∏Ç‡πâ‡∏°‡∏Ç‡∏∂‡πâ‡∏ô */
			color: #ffffff; /* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
			padding: 20px 30px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° padding ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÅ‡∏•‡∏∞‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
		}
		/* General Styles */
		body,
		html {
			margin: 0;
			padding: 0;
			height: 100%;
			overflow: hidden; /* Prevent scrolling during loading */
			font-family: "Arial", sans-serif;
			background-color: #0c1326; /* Default background */
		}

		/* Fullscreen Loading Container */
		.loading-screen {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: #0c1326; /* Dark background */
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: row;
			z-index: 9999;
		}

		/* Background Animation Split */
		.background {
			position: absolute;
			width: 100%;
			height: 50%;
			background-color: #070f1f;
			z-index: 1;
		}
		.background.top {
			top: 0;
			animation: slide-out-top 1.5s ease 2.5s forwards;
		}
		.background.bottom {
			bottom: 0;
			animation: slide-out-bottom 1.5s ease 2.5s forwards;
		}

		/* Text Animation */
		.loading-text-container {
			position: relative;
			display: flex;
			align-items: center;
			z-index: 2;
		}

		.loading-text-store {
			font-size: 2rem;
			font-weight: bold;
			font-family: "Arial", sans-serif;
			color: #ffffff;
			letter-spacing: 3px;
			writing-mode: vertical-rl; /* ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
			transform: rotate(180deg) translateX(-100%); /* ‡∏´‡∏°‡∏∏‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏±‡∏ß */
			animation: slide-in-left 1.5s ease forwards;
			margin-right: 10px;
		}

		.loading-text-game {
			font-size: 2.5rem;
			font-weight: bold;
			font-family: "Arial", sans-serif;
			color: #ffffff;
			letter-spacing: 3px;
			opacity: 0; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ã‡πà‡∏≠‡∏ô */
			transform: translateY(100%); /* ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
			animation: slide-in-up 1.5s ease 1.5s forwards;
		}

		/* Animations */
		@keyframes slide-out-top {
			0% {
				height: 50%;
			}
			100% {
				height: 0%;
			}
		}

		@keyframes slide-out-bottom {
			0% {
				height: 50%;
			}
			100% {
				height: 0%;
			}
		}

		@keyframes slide-in-left {
			0% {
				transform: rotate(180deg) translateX(-100%);
				opacity: 0;
			}
			100% {
				transform: rotate(180deg) translateX(0);
				opacity: 1;
			}
		}

		@keyframes slide-in-up {
			0% {
				transform: translateY(100%);
				opacity: 0;
			}
			100% {
				transform: translateY(0);
				opacity: 1;
			}
		}

		/* CSS toggle button */

		/* ToggleButton */
		:root {
			--bg-dark: #10142b;
			--navbar-dark: #1a1f36;
			--sidebar-dark: #ececff;
			--sidebar-item-dark: #ffffff;
			--sidebar-item-hover-dark: #f3f1ff;
			--content-dark: #ececff;
			--text-dark: #ffffff;
		}

		.light {
			--bg-dark: #ffffff;
			--navbar-dark: #6b46c1; /* bg-purple-600 */
			--sidebar-dark: #f9f9f9;
			--sidebar-item-dark: #e5e5e5;
			--sidebar-item-hover-dark: #dadada;
			--content-dark: #ffffff;
			--text-dark: #000000;
			--navbar-text: #ffffff;
		}

		body {
			background-color: var(--bg-dark);
			font-family: "Inter", sans-serif;
			color: var(--text-dark);
		}
		.navbar {
			background-color: var(--navbar-dark);
			color: var(--text-dark);
		}
		.light .navbar {
			color: var(--navbar-text);
		}
		.sidebar {
			background-color: var(--sidebar-dark);
		}
		.sidebar-item {
			background-color: var(--sidebar-item-dark);
		}
		.sidebar-item:hover {
			background-color: var(--sidebar-item-hover-dark);
		}
		.content {
			background-color: var(--content-dark);
		}
	</style>
</head>
<body class="bg-gray-100">
	<header class="bg-purple-600 text-white">
    <!-- Navbar -->
    
        <div class="container mx-auto flex justify-between items-center">
            <div class="text-2xl font-bold inline">
				<img
					id="logo"
					src="image/logo_player/light_logo.png"
					alt="light_logo"
					class="w-auto h-24 inline mr-3 transform transition-transform duration-300 hover:scale-105 filter brightness-90"
				/>

				PLAYERHAVEN
			</div>
            <div class="space-x-4">
				<!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö -->
				<button id="loginBtn" class="bg-indigo-700 px-4 py-2 rounded hover:bg-indigo-800"
					onclick="location.href='Login.html'">
					‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
				</button>
			
				<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å -->
				<button id="registerBtn" class="border border-white px-4 py-2 rounded hover:bg-indigo-700"
					onclick="location.href='Register.html'">
					‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
				</button>
			
				<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö (‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô) -->
				<button id="logoutBtn" class="hidden bg-red-500 px-4 py-2 rounded hover:bg-red-600"
					onclick="logout()">
					‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
				</button>
			
				<!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏° -->
				<button onclick="toggleTheme()" class="p-2 rounded bg-gray-300 dark:bg-gray-600">
					üåô / ‚òÄÔ∏è
				</button>
			</div>
        </div>
    </nav>
</header>
    <!-- Main Section -->
		<div class="flex justify-center py-8">
			<!-- Sidebar -->
			<aside class="sidebar w-64 p-6 rounded-lg shadow-md">
				<ul class="space-y-4">
					<!-- Tab: Top-Up History -->
					<li>
						<a
							href="TopUpHistory.html"
							class="sidebar-item flex items-center space-x-3 rounded-lg p-3 hover:shadow-md"
						>
							<img
								src="https://media.discordapp.net/attachments/1333465176686723124/1333739459614736384/DALL_E-2025-01-28-17.03.01-A-sleek_-cyberpunk-themed-icon-for-a-top-up-system-removebg-preview.png?ex=6799fd2a&is=6798abaa&hm=fbde12851b4d3ea71daf8da35159cd7ef2efa8487b837884adc619f22b9b4bc3&=&format=webp&quality=lossless"
								alt="Top-Up History"
								class="w-6 h-6"
							/>
							<span class="font-semibold">Top-Up History</span>
						</a>
					</li>
					<!-- Tab: Purchase History -->
					<li>
						<a
							href="PurchaseHistory.html"
							class="sidebar-item flex items-center space-x-3 rounded-lg p-3 hover:shadow-md"
						>
							<img
								src="https://media.discordapp.net/attachments/1333465176686723124/1333739998385541130/DALL_E-2025-01-28-17.05.44-A-sleek_-cyberpunk-themed-icon-representing-_Purchase-History-removebg-preview.png?ex=6799fdab&is=6798ac2b&hm=a3b32dbb7886fde1bda3390c45602621a78ad3e4530ee65b3ad8d7ffd7aa97bb&=&format=webp&quality=lossless"
								alt="Purchase History"
								class="w-6 h-6"
							/>
							<span class="font-semibold">Purchase History</span>
						</a>
					</li>
					<!-- Tab: Game Card Box -->
					<li>
						<a
							href="GameCardBox.html"
							class="sidebar-item flex items-center space-x-3 rounded-lg p-3 hover:shadow-md"
						>
							<img
								src="https://media.discordapp.net/attachments/1333465176686723124/1333740853314846761/DALL_E-2025-01-28-17.07.50-A-sleek_-cyberpunk-themed-icon-representing-a-_Game-Card-Box-removebg-preview.png?ex=6799fe77&is=6798acf7&hm=4ae528f0d59da29747f16afa9202b8c08b45ebd8c83fc4167027e30f5f342609&=&format=webp&quality=lossless"
								alt="Game Card Box"
								class="w-6 h-6"
							/>
							<span class="font-semibold">Game Card Box</span>
						</a>
					</li>
					<!-- Tab: Mailbox -->
					<li>
						<a
							href="Mailbox.html"
							class="sidebar-item flex items-center space-x-3 rounded-lg p-3 hover:shadow-md"
						>
							<img
								src="https://media.discordapp.net/attachments/1333465176686723124/1333743617851789323/DALL_E-2025-01-28-17.18-removebg-preview-removebg-preview.png?ex=679a010a&is=6798af8a&hm=b5cb791be5f1e80650f1ecf31a34d6cb8d598c28377213873e5ee6d2a1b9fa21&=&format=webp&quality=lossless"
								alt="Mailbox"
								class="w-6 h-6"
							/>
							<span class="font-semibold">Mailbox</span>
						</a>
					</li>
					<!-- Tab: Log Out -->
					<li>
						<a
							href="Logout.html"
							class="sidebar-item flex items-center space-x-3 rounded-lg p-3 hover:shadow-md"
						>
							<img
								src="https://media.discordapp.net/attachments/1333465176686723124/1333741803706384394/DALL_E-2025-01-28-17.11.30-A-sleek_-cyberpunk-themed-icon-representing-_Log-Out-removebg-preview.png?ex=6799ff59&is=6798add9&hm=136cdf858304ea5aecb6ac9bae7bc8b4345f600a1069446b0bd150a343261c76&=&format=webp&quality=lossless"
								alt="Log Out"
								class="w-6 h-6"
							/>
							<span class="font-semibold">Log Out</span>
						</a>
					</li>
				</ul>
			</aside>

        <!-- Content -->
        <main class="content flex-1 p-6 rounded-lg shadow-md ml-6">
            <h2 class="text-2xl font-bold mb-6">Personal Information</h2>
			<form id="profileForm">
				<div class="mb-4">
					<label class="block text-gray-300">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
					<input type="text" name="username" id="username" class="w-full p-2 rounded bg-gray-700 border border-gray-600 text-white">
				</div>
				<div class="mb-4">
					<label class="block text-gray-300">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
					<input type="email" name="email" id="email" class="w-full p-2 rounded bg-gray-700 border border-gray-600 text-white">
				</div>
				<div class="mb-4">
					<label class="block text-gray-300">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
					<input type="text" name="phone" id="phone" class="w-full p-2 rounded bg-gray-700 border border-gray-600 text-white">
				</div>
				<button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 py-2 rounded text-white font-bold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á</button>
			</form>
			
        </main>
    </div>
	<script>
		function toggleTheme() {
				const body = document.body;
				const navbar = document.querySelector("header");
				const loginSection = document.querySelector(".bg-indigo-600");
				const logo = document.getElementById("logo");
				const isDarkMode = body.classList.toggle("dark-mode");

				// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ï‡∏≤‡∏°‡πÇ‡∏´‡∏°‡∏î
	
				if (isDarkMode) {
					logo.src = "image/logo_player/dark_logo.png"; // ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏°
					body.style.backgroundColor = "#10142b";
					navbar.style.backgroundColor = "#1a1f36";
					loginSection.style.backgroundColor = "#232c58";
				} else {
					logo.src = "image/logo_player/light_logo.png"; // ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏ß‡πà‡∏≤‡∏á
					body.style.backgroundColor = "";
					navbar.style.backgroundColor = "";
					loginSection.style.backgroundColor = "";
				}

	
				localStorage.setItem("theme", isDarkMode ? "dark" : "light");
			}
	</script>
</body>
</html>
